extends ../layout.pug

block content
    .row
        .col-4
            form(method="post" action="/admin/settings")
                h1 Admin - SMTP Settings
                .mb-3
                    label(for="smtpHost" class="form-label") SMTP Host
                    input#smtpHost.form-control(type="text" name="smtpHost" value=smtpSettings.smtpHost ? smtpSettings.smtpHost : '127.0.0.1'  )
                .mb-3
                    label(for="smtpPort" class="form-label") SMTP Port
                    input#smtpPort.form-control(type="number" name="smtpPort" value=smtpSettings.smtpPort ? smtpSettings.smtpPort : '1025'  )
                .mb-3
                    label(for="smtpUsername" class="form-label") SMTP Username
                    input#smtpUsername.form-control(type="text" name="smtpUsername" value=smtpSettings.smtpUsername)
                .mb-3
                    label(for="smtpPassword" class="form-label") SMTP Password
                    input#smtpPassword.form-control(type="password" name="smtpPassword" value=smtpSettings.smtpPassword)
                .mb-3.form-check
                    input#smtpSecure.form-check-input(type="checkbox" name="smtpSecure" checked=smtpSettings.smtpSecure)
                    label(for="smtpSecure" class="form-check-label") SMTP Secure
                h1 Admin - SLA Settings
                .mb-3
                    label(for="slaInfo" class="form-label") Informational Findings SLA (days)
                    input#slaInfo.form-control(type="number" name="slaInfo" value=SLASettings.info ? SLASettings.info : '365')
                .mb-3
                    label(for="slaLow" class="form-label") Low Findings SLA (days)
                    input#slaLow.form-control(type="number" name="slaLow" value=SLASettings.low ? SLASettings.low : '270')
                .mb-3
                    label(for="slaMedium" class="form-label") Medium Findings SLA (days)
                    input#slaMedium.form-control(type="number" name="slaMedium" value=SLASettings.medium ? SLASettings.medium : '90')
                .mb-3
                    label(for="slaHigh" class="form-label") High Findings SLA (days)
                    input#slaHigh.form-control(type="number" name="slaHigh" value=SLASettings.high ? SLASettings.high : '14')
                .mb-3
                    label(for="slaCritical" class="form-label") Critical Findings SLA (days)
                    input#slaCritical.form-control(type="number" name="slaCritical" value=SLASettings.critical ? SLASettings.critical : '3')
                .mb-3
                    button.btn.btn-primary(type="submit") Save Settings
                .mb-3
                    label(for="testEmail" class="form-label") Test Email Address
                    input#testEmail.form-control(type="email" name="testEmail" placeholder="Enter an email address to send a test email")
                .mb-3
                    button.btn.btn-secondary(type="submit" formaction="/admin/test-email") Send Test Email
            if success_msg.length > 0
                .alert.alert-success #{success_msg[0]}
            if error_msg.length > 0
                .alert.alert-danger #{error_msg[0]}
